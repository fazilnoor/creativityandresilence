import{S as Xt,i as Ot,s as Mt,a as S,k as l,q as G,N as zt,h as s,c as _,l as c,m as f,r as V,n as u,L as Yt,b as Bt,G as o,K as Ct,H as Qe,O as Gt,o as Vt,M as Ht}from"../chunks/index.bd1827a9.js";import{b as Wt}from"../chunks/paths.88eb0d3e.js";const{document:Nt}=Ht;function kt(Be){let U,E,B,m,T,Ce,p,t,N,Ne,w,fe,Xe,X,$,se,D,Oe,C,_e,ve,Me,ze,De,de,Ye,Ge,he,H,P,F,d,y,W,L,me,le,M,I,k,J,z,Q,pe,Ee,Z,O,ce,ye,Le,Ve,ee,K,te,Ae,Ie,He,ue,xe,we,Fe,We,ke,b,re,be,Ue,ie,Pe,Ke,ge,q,qe,Te,Re,A,Se,e,r,i,a,n,v,h,x,g;return{c(){U=S(),E=l("main"),B=l("div"),m=S(),T=l("canvas"),Ce=S(),p=l("section"),t=l("p"),N=G("Welcome to"),Ne=S(),w=l("h2"),fe=l("span"),Xe=G("Creative"),X=l("br"),$=l("span"),se=l("span"),D=G("R"),Oe=G("esilience"),C=S(),_e=l("p"),ve=l("span"),Me=G("This website offers a toolkit to support happiness, mental wellbeing and resilience during stressful and emotionally challenging times."),ze=S(),De=l("p"),de=l("span"),Ye=G("Here you will meet the five elements, earth, water, wind, fire and space. Through the lens of these elements, you will find uplifting meditations, psychological exercises, interactive sharing and other mindful ways to enhance your daily life. This is a habitat for joyful experiences and learning."),Ge=S(),he=l("p"),H=l("a"),P=G("Enter the experience"),F=S(),d=l("section"),y=l("div"),W=l("a"),L=l("div"),me=l("h3"),le=l("span"),M=G("Space"),I=S(),k=l("a"),J=l("div"),z=l("h3"),Q=l("span"),pe=G("Earth"),Ee=S(),Z=l("a"),O=l("div"),ce=l("h3"),ye=l("span"),Le=G("Wind"),Ve=S(),ee=l("a"),K=l("div"),te=l("h3"),Ae=l("span"),Ie=G("Fire"),He=S(),ue=l("a"),xe=l("div"),we=l("h3"),Fe=l("span"),We=G("Water"),ke=S(),b=l("div"),re=l("div"),be=l("div"),Ue=S(),ie=l("div"),Pe=l("div"),Ke=S(),ge=l("div"),q=l("div"),qe=S(),Te=l("div"),Re=l("div"),A=S(),Se=l("div"),e=l("div"),r=S(),i=l("a"),a=S(),n=l("audio"),v=l("source"),this.h()},l(R){zt("svelte-1fxwdp8",Nt.head).forEach(s),U=_(R),E=c(R,"MAIN",{class:!0});var Y=f(E);B=c(Y,"DIV",{class:!0,id:!0}),f(B).forEach(s),m=_(Y),T=c(Y,"CANVAS",{id:!0}),f(T).forEach(s),Ce=_(Y),p=c(Y,"SECTION",{class:!0,id:!0});var ae=f(p);t=c(ae,"P",{class:!0});var Ze=f(t);N=V(Ze,"Welcome to"),Ze.forEach(s),Ne=_(ae),w=c(ae,"H2",{class:!0});var je=f(w);fe=c(je,"SPAN",{class:!0});var et=f(fe);Xe=V(et,"Creative"),et.forEach(s),X=c(je,"BR",{}),$=c(je,"SPAN",{class:!0});var Je=f($);se=c(Je,"SPAN",{class:!0});var tt=f(se);D=V(tt,"R"),tt.forEach(s),Oe=V(Je,"esilience"),Je.forEach(s),je.forEach(s),C=_(ae),_e=c(ae,"P",{});var rt=f(_e);ve=c(rt,"SPAN",{class:!0});var it=f(ve);Me=V(it,"This website offers a toolkit to support happiness, mental wellbeing and resilience during stressful and emotionally challenging times."),it.forEach(s),rt.forEach(s),ze=_(ae),De=c(ae,"P",{});var at=f(De);de=c(at,"SPAN",{class:!0});var ot=f(de);Ye=V(ot,"Here you will meet the five elements, earth, water, wind, fire and space. Through the lens of these elements, you will find uplifting meditations, psychological exercises, interactive sharing and other mindful ways to enhance your daily life. This is a habitat for joyful experiences and learning."),ot.forEach(s),at.forEach(s),Ge=_(ae),he=c(ae,"P",{class:!0});var nt=f(he);H=c(nt,"A",{href:!0,class:!0,id:!0});var st=f(H);P=V(st,"Enter the experience"),st.forEach(s),nt.forEach(s),ae.forEach(s),F=_(Y),d=c(Y,"SECTION",{class:!0,id:!0});var $e=f(d);y=c($e,"DIV",{class:!0});var oe=f(y);W=c(oe,"A",{href:!0,class:!0});var lt=f(W);L=c(lt,"DIV",{class:!0});var ct=f(L);me=c(ct,"H3",{});var ut=f(me);le=c(ut,"SPAN",{});var ft=f(le);M=V(ft,"Space"),ft.forEach(s),ut.forEach(s),ct.forEach(s),lt.forEach(s),I=_(oe),k=c(oe,"A",{href:!0,class:!0});var vt=f(k);J=c(vt,"DIV",{class:!0});var dt=f(J);z=c(dt,"H3",{});var ht=f(z);Q=c(ht,"SPAN",{});var mt=f(Q);pe=V(mt,"Earth"),mt.forEach(s),ht.forEach(s),dt.forEach(s),vt.forEach(s),Ee=_(oe),Z=c(oe,"A",{href:!0,class:!0});var pt=f(Z);O=c(pt,"DIV",{class:!0});var Et=f(O);ce=c(Et,"H3",{});var xt=f(ce);ye=c(xt,"SPAN",{});var gt=f(ye);Le=V(gt,"Wind"),gt.forEach(s),xt.forEach(s),Et.forEach(s),pt.forEach(s),Ve=_(oe),ee=c(oe,"A",{href:!0,class:!0});var Tt=f(ee);K=c(Tt,"DIV",{class:!0});var Rt=f(K);te=c(Rt,"H3",{});var St=f(te);Ae=c(St,"SPAN",{});var _t=f(Ae);Ie=V(_t,"Fire"),_t.forEach(s),St.forEach(s),Rt.forEach(s),Tt.forEach(s),He=_(oe),ue=c(oe,"A",{href:!0,class:!0});var Dt=f(ue);xe=c(Dt,"DIV",{class:!0});var yt=f(xe);we=c(yt,"H3",{});var At=f(we);Fe=c(At,"SPAN",{});var wt=f(Fe);We=V(wt,"Water"),wt.forEach(s),At.forEach(s),yt.forEach(s),Dt.forEach(s),oe.forEach(s),ke=_($e),b=c($e,"DIV",{class:!0});var ne=f(b);re=c(ne,"DIV",{class:!0});var Ft=f(re);be=c(Ft,"DIV",{class:!0}),f(be).forEach(s),Ft.forEach(s),Ue=_(ne),ie=c(ne,"DIV",{class:!0});var bt=f(ie);Pe=c(bt,"DIV",{class:!0}),f(Pe).forEach(s),bt.forEach(s),Ke=_(ne),ge=c(ne,"DIV",{class:!0});var Ut=f(ge);q=c(Ut,"DIV",{class:!0}),f(q).forEach(s),Ut.forEach(s),qe=_(ne),Te=c(ne,"DIV",{class:!0});var Pt=f(Te);Re=c(Pt,"DIV",{class:!0}),f(Re).forEach(s),Pt.forEach(s),A=_(ne),Se=c(ne,"DIV",{class:!0});var Lt=f(Se);e=c(Lt,"DIV",{class:!0}),f(e).forEach(s),Lt.forEach(s),ne.forEach(s),$e.forEach(s),r=_(Y),i=c(Y,"A",{href:!0,id:!0,class:!0}),f(i).forEach(s),a=_(Y),n=c(Y,"AUDIO",{id:!0});var It=f(n);v=c(It,"SOURCE",{src:!0,type:!0}),It.forEach(s),Y.forEach(s),this.h()},h(){Nt.title="Welcome to Creative Resilience",u(B,"class","bg-image"),u(B,"id","bgImage"),u(T,"id","smokeCursor"),u(t,"class","welcome"),u(fe,"class","regular"),u(se,"class","initial"),u($,"class","ital"),u(w,"class","intro-title"),u(ve,"class","wipe-in"),u(de,"class","wipe-in"),u(H,"href","#"),u(H,"class","cta-enter"),u(H,"id","enterButton"),u(he,"class","enter-site"),u(p,"class","intro"),u(p,"id","scene1"),u(L,"class","circle"),u(W,"href","space"),u(W,"class","space"),u(J,"class","circle"),u(k,"href","earth"),u(k,"class","earth"),u(O,"class","circle"),u(Z,"href","wind"),u(Z,"class","wind"),u(K,"class","circle"),u(ee,"href","fire"),u(ee,"class","fire"),u(xe,"class","circle"),u(ue,"href","water"),u(ue,"class","water"),u(y,"class","mandala"),u(be,"class","circle"),u(re,"class","space"),u(Pe,"class","circle"),u(ie,"class","earth"),u(q,"class","circle"),u(ge,"class","wind"),u(Re,"class","circle"),u(Te,"class","fire"),u(e,"class","circle"),u(Se,"class","water"),u(b,"class","mandala-circles"),b.hidden=!0,u(d,"class","mandala-wrap"),u(d,"id","scene2"),u(i,"href","#ambient"),u(i,"id","audioCtl"),u(i,"class","sound-ctl stopped"),Yt(v.src,h=Wt+"/assets/might-amp-magic-138999.mp3")||u(v,"src",h),u(v,"type","audio/mpeg"),n.loop=!0,u(n,"id","ambient"),u(E,"class","home no-pad")},m(R,j){Bt(R,U,j),Bt(R,E,j),o(E,B),o(E,m),o(E,T),o(E,Ce),o(E,p),o(p,t),o(t,N),o(p,Ne),o(p,w),o(w,fe),o(fe,Xe),o(w,X),o(w,$),o($,se),o(se,D),o($,Oe),o(p,C),o(p,_e),o(_e,ve),o(ve,Me),o(p,ze),o(p,De),o(De,de),o(de,Ye),o(p,Ge),o(p,he),o(he,H),o(H,P),o(E,F),o(E,d),o(d,y),o(y,W),o(W,L),o(L,me),o(me,le),o(le,M),o(y,I),o(y,k),o(k,J),o(J,z),o(z,Q),o(Q,pe),o(y,Ee),o(y,Z),o(Z,O),o(O,ce),o(ce,ye),o(ye,Le),o(y,Ve),o(y,ee),o(ee,K),o(K,te),o(te,Ae),o(Ae,Ie),o(y,He),o(y,ue),o(ue,xe),o(xe,we),o(we,Fe),o(Fe,We),o(d,ke),o(d,b),o(b,re),o(re,be),o(b,Ue),o(b,ie),o(ie,Pe),o(b,Ke),o(b,ge),o(ge,q),o(b,qe),o(b,Te),o(Te,Re),o(b,A),o(b,Se),o(Se,e),o(E,r),o(E,i),o(E,a),o(E,n),o(n,v),x||(g=[Ct(H,"click",Kt),Ct(i,"click",Be[0])],x=!0)},p:Qe,i:Qe,o:Qe,d(R){R&&s(U),R&&s(E),x=!1,Gt(g)}}}function Kt(Be){Be.preventDefault();let U=document.getElementById("bgImage"),E=document.getElementById("scene1"),B=document.getElementById("scene2");E==null||E.classList.add("hide"),U==null||U.classList.add("play"),B==null||B.classList.add("play")}function qt(Be){let U=!1;function E(B){let m=document.getElementById("ambient");U?(m.pause(),U=!U,B.target.classList.add("stopped")):(m.play(),U=!U,B.target.classList.remove("stopped"))}return Vt(()=>{(()=>{const m=document.getElementById("smokeCursor");Ie();let T={SIM_RESOLUTION:128,DYE_RESOLUTION:1440,CAPTURE_RESOLUTION:512,DENSITY_DISSIPATION:.98,VELOCITY_DISSIPATION:.99,PRESSURE:.8,PRESSURE_ITERATIONS:25,CURL:1,SPLAT_RADIUS:.3,SPLAT_FORCE:1e3,SHADING:!0,COLOR_UPDATE_SPEED:5,PAUSED:!1,BACK_COLOR:{r:0,g:0,b:0},TRANSPARENT:!0};function Ce(){this.id=-1,this.texcoordX=0,this.texcoordY=0,this.prevTexcoordX=0,this.prevTexcoordY=0,this.deltaX=0,this.deltaY=0,this.down=!1,this.moved=!1,this.color=[30,0,300]}let p=[];p.push(new Ce);const{gl:t,ext:N}=Ne(m);N.supportLinearFiltering||(T.DYE_RESOLUTION=512,T.SHADING=!1);function Ne(e){const r={alpha:!0,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1};let i=e.getContext("webgl2",r);const a=!!i;a||(i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r));let n,v;a?(i.getExtension("EXT_color_buffer_float"),v=i.getExtension("OES_texture_float_linear")):(n=i.getExtension("OES_texture_half_float"),v=i.getExtension("OES_texture_half_float_linear")),i.clearColor(0,0,0,1);const h=a?i.HALF_FLOAT:n.HALF_FLOAT_OES;let x,g,R;return a?(x=w(i,i.RGBA16F,i.RGBA,h),g=w(i,i.RG16F,i.RG,h),R=w(i,i.R16F,i.RED,h)):(x=w(i,i.RGBA,i.RGBA,h),g=w(i,i.RGBA,i.RGBA,h),R=w(i,i.RGBA,i.RGBA,h)),{gl:i,ext:{formatRGBA:x,formatRG:g,formatR:R,halfFloatTexType:h,supportLinearFiltering:v}}}function w(e,r,i,a){if(!fe(e,r,i,a))switch(r){case e.R16F:return w(e,e.RG16F,e.RG,a);case e.RG16F:return w(e,e.RGBA16F,e.RGBA,a);default:return null}return{internalFormat:r,format:i}}function fe(e,r,i,a){let n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,r,4,4,0,i,a,null);let v=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.checkFramebufferStatus(e.FRAMEBUFFER)==e.FRAMEBUFFER_COMPLETE}class Xe{constructor(r,i){this.vertexShader=r,this.fragmentShaderSource=i,this.programs=[],this.activeProgram=null,this.uniforms=[]}setKeywords(r){let i=0;for(let n=0;n<r.length;n++)i+=Se(r[n]);let a=this.programs[i];if(a==null){let n=D(t.FRAGMENT_SHADER,this.fragmentShaderSource,r);a=$(this.vertexShader,n),this.programs[i]=a}a!=this.activeProgram&&(this.uniforms=se(a),this.activeProgram=a)}bind(){t.useProgram(this.activeProgram)}}class X{constructor(r,i){this.uniforms={},this.program=$(r,i),this.uniforms=se(this.program)}bind(){t.useProgram(this.program)}}function $(e,r){let i=t.createProgram();return t.attachShader(i,e),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||console.trace(t.getProgramInfoLog(i)),i}function se(e){let r=[],i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let a=0;a<i;a++){let n=t.getActiveUniform(e,a).name;r[n]=t.getUniformLocation(e,n)}return r}function D(e,r,i){r=Oe(r,i);const a=t.createShader(e);return t.shaderSource(a,r),t.compileShader(a),t.getShaderParameter(a,t.COMPILE_STATUS)||console.trace(t.getShaderInfoLog(a)),a}function Oe(e,r){if(r==null)return e;let i="";return r.forEach(a=>{i+="#define "+a+`
`}),i+e}const C=D(t.VERTEX_SHADER,`
        precision highp float;
    
        attribute vec2 aPosition;
        varying vec2 vUv;
        varying vec2 vL;
        varying vec2 vR;
        varying vec2 vT;
        varying vec2 vB;
        uniform vec2 texelSize;
    
        void main () {
            vUv = aPosition * 0.5 + 0.5;
            vL = vUv - vec2(texelSize.x, 0.0);
            vR = vUv + vec2(texelSize.x, 0.0);
            vT = vUv + vec2(0.0, texelSize.y);
            vB = vUv - vec2(0.0, texelSize.y);
            gl_Position = vec4(aPosition, 0.0, 1.0);
        }
    `);D(t.VERTEX_SHADER,`
        precision highp float;
    
        attribute vec2 aPosition;
        varying vec2 vUv;
        varying vec2 vL;
        varying vec2 vR;
        uniform vec2 texelSize;
    
        void main () {
            vUv = aPosition * 0.5 + 0.5;
            float offset = 1.33333333;
            vL = vUv - texelSize * offset;
            vR = vUv + texelSize * offset;
            gl_Position = vec4(aPosition, 0.0, 1.0);
        }
    `),D(t.FRAGMENT_SHADER,`
        precision mediump float;
        precision mediump sampler2D;
    
        varying vec2 vUv;
        varying vec2 vL;
        varying vec2 vR;
        uniform sampler2D uTexture;
    
        void main () {
            vec4 sum = texture2D(uTexture, vUv) * 0.29411764;
            sum += texture2D(uTexture, vL) * 0.35294117;
            sum += texture2D(uTexture, vR) * 0.35294117;
            gl_FragColor = sum;
        }
    `);const _e=D(t.FRAGMENT_SHADER,`
        precision mediump float;
        precision mediump sampler2D;
    
        varying highp vec2 vUv;
        uniform sampler2D uTexture;
    
        void main () {
            gl_FragColor = texture2D(uTexture, vUv);
        }
    `),ve=D(t.FRAGMENT_SHADER,`
        precision mediump float;
        precision mediump sampler2D;
    
        varying highp vec2 vUv;
        uniform sampler2D uTexture;
        uniform float value;
    
        void main () {
            gl_FragColor = value * texture2D(uTexture, vUv);
        }
    `);D(t.FRAGMENT_SHADER,`
        precision mediump float;
    
        uniform vec4 color;
    
        void main () {
            gl_FragColor = color;
        }
    `);const Me=`
        precision highp float;
        precision highp sampler2D;
    
        varying vec2 vUv;
        varying vec2 vL;
        varying vec2 vR;
        varying vec2 vT;
        varying vec2 vB;
        uniform sampler2D uTexture;
        uniform sampler2D uDithering;
        uniform vec2 ditherScale;
        uniform vec2 texelSize;
    
        vec3 linearToGamma (vec3 color) {
            color = max(color, vec3(0));
            return max(1.055 * pow(color, vec3(0.416666667)) - 0.055, vec3(0));
        }
    
        void main () {
            vec3 c = texture2D(uTexture, vUv).rgb;
    
        #ifdef SHADING
            vec3 lc = texture2D(uTexture, vL).rgb;
            vec3 rc = texture2D(uTexture, vR).rgb;
            vec3 tc = texture2D(uTexture, vT).rgb;
            vec3 bc = texture2D(uTexture, vB).rgb;
    
            float dx = length(rc) - length(lc);
            float dy = length(tc) - length(bc);
    
            vec3 n = normalize(vec3(dx, dy, length(texelSize)));
            vec3 l = vec3(0.0, 0.0, 1.0);
    
            float diffuse = clamp(dot(n, l) + 0.7, 0.7, 1.0);
            c *= diffuse;
        #endif
    
            float a = max(c.r, max(c.g, c.b));
            gl_FragColor = vec4(c, a);
        }
    `,ze=D(t.FRAGMENT_SHADER,`
        precision highp float;
        precision highp sampler2D;
    
        varying vec2 vUv;
        uniform sampler2D uTarget;
        uniform float aspectRatio;
        uniform vec3 color;
        uniform vec2 point;
        uniform float radius;
    
        void main () {
            vec2 p = vUv - point.xy;
            p.x *= aspectRatio;
            vec3 splat = exp(-dot(p, p) / radius) * color;
            vec3 base = texture2D(uTarget, vUv).xyz;
            gl_FragColor = vec4(base + splat, 1.0);
        }
    `),De=D(t.FRAGMENT_SHADER,`
        precision highp float;
        precision highp sampler2D;
    
        varying vec2 vUv;
        uniform sampler2D uVelocity;
        uniform sampler2D uSource;
        uniform vec2 texelSize;
        uniform vec2 dyeTexelSize;
        uniform float dt;
        uniform float dissipation;
    
        vec4 bilerp (sampler2D sam, vec2 uv, vec2 tsize) {
            vec2 st = uv / tsize - 0.5;
    
            vec2 iuv = floor(st);
            vec2 fuv = fract(st);
    
            vec4 a = texture2D(sam, (iuv + vec2(0.5, 0.5)) * tsize);
            vec4 b = texture2D(sam, (iuv + vec2(1.5, 0.5)) * tsize);
            vec4 c = texture2D(sam, (iuv + vec2(0.5, 1.5)) * tsize);
            vec4 d = texture2D(sam, (iuv + vec2(1.5, 1.5)) * tsize);
    
            return mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);
        }
    
        void main () {
        #ifdef MANUAL_FILTERING
            vec2 coord = vUv - dt * bilerp(uVelocity, vUv, texelSize).xy * texelSize;
            vec4 result = bilerp(uSource, coord, dyeTexelSize);
        #else
            vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;
            vec4 result = texture2D(uSource, coord);
        #endif
            float decay = 1.0 + dissipation * dt;
            gl_FragColor = result / decay;
        }`,N.supportLinearFiltering?null:["MANUAL_FILTERING"]),de=D(t.FRAGMENT_SHADER,`
        precision mediump float;
        precision mediump sampler2D;
    
        varying highp vec2 vUv;
        varying highp vec2 vL;
        varying highp vec2 vR;
        varying highp vec2 vT;
        varying highp vec2 vB;
        uniform sampler2D uVelocity;
    
        void main () {
            float L = texture2D(uVelocity, vL).x;
            float R = texture2D(uVelocity, vR).x;
            float T = texture2D(uVelocity, vT).y;
            float B = texture2D(uVelocity, vB).y;
    
            vec2 C = texture2D(uVelocity, vUv).xy;
            if (vL.x < 0.0) { L = -C.x; }
            if (vR.x > 1.0) { R = -C.x; }
            if (vT.y > 1.0) { T = -C.y; }
            if (vB.y < 0.0) { B = -C.y; }
    
            float div = 0.5 * (R - L + T - B);
            gl_FragColor = vec4(div, 0.0, 0.0, 1.0);
        }
    `),Ye=D(t.FRAGMENT_SHADER,`
        precision mediump float;
        precision mediump sampler2D;
    
        varying highp vec2 vUv;
        varying highp vec2 vL;
        varying highp vec2 vR;
        varying highp vec2 vT;
        varying highp vec2 vB;
        uniform sampler2D uVelocity;
    
        void main () {
            float L = texture2D(uVelocity, vL).y;
            float R = texture2D(uVelocity, vR).y;
            float T = texture2D(uVelocity, vT).x;
            float B = texture2D(uVelocity, vB).x;
            float vorticity = R - L - T + B;
            gl_FragColor = vec4(0.5 * vorticity, 0.0, 0.0, 1.0);
        }
    `),Ge=D(t.FRAGMENT_SHADER,`
        precision highp float;
        precision highp sampler2D;
    
        varying vec2 vUv;
        varying vec2 vL;
        varying vec2 vR;
        varying vec2 vT;
        varying vec2 vB;
        uniform sampler2D uVelocity;
        uniform sampler2D uCurl;
        uniform float curl;
        uniform float dt;
    
        void main () {
            float L = texture2D(uCurl, vL).x;
            float R = texture2D(uCurl, vR).x;
            float T = texture2D(uCurl, vT).x;
            float B = texture2D(uCurl, vB).x;
            float C = texture2D(uCurl, vUv).x;
    
            vec2 force = 0.5 * vec2(abs(T) - abs(B), abs(R) - abs(L));
            force /= length(force) + 0.0001;
            force *= curl * C;
            force.y *= -1.0;
    
            vec2 velocity = texture2D(uVelocity, vUv).xy;
            velocity += force * dt;
            velocity = min(max(velocity, -1000.0), 1000.0);
            gl_FragColor = vec4(velocity, 0.0, 1.0);
        }
    `),he=D(t.FRAGMENT_SHADER,`
        precision mediump float;
        precision mediump sampler2D;
    
        varying highp vec2 vUv;
        varying highp vec2 vL;
        varying highp vec2 vR;
        varying highp vec2 vT;
        varying highp vec2 vB;
        uniform sampler2D uPressure;
        uniform sampler2D uDivergence;
    
        void main () {
            float L = texture2D(uPressure, vL).x;
            float R = texture2D(uPressure, vR).x;
            float T = texture2D(uPressure, vT).x;
            float B = texture2D(uPressure, vB).x;
            float C = texture2D(uPressure, vUv).x;
            float divergence = texture2D(uDivergence, vUv).x;
            float pressure = (L + R + B + T - divergence) * 0.25;
            gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);
        }
    `),H=D(t.FRAGMENT_SHADER,`
        precision mediump float;
        precision mediump sampler2D;
    
        varying highp vec2 vUv;
        varying highp vec2 vL;
        varying highp vec2 vR;
        varying highp vec2 vT;
        varying highp vec2 vB;
        uniform sampler2D uPressure;
        uniform sampler2D uVelocity;
    
        void main () {
            float L = texture2D(uPressure, vL).x;
            float R = texture2D(uPressure, vR).x;
            float T = texture2D(uPressure, vT).x;
            float B = texture2D(uPressure, vB).x;
            vec2 velocity = texture2D(uVelocity, vUv).xy;
            velocity.xy -= vec2(R - L, T - B);
            gl_FragColor = vec4(velocity, 0.0, 1.0);
        }
    `),P=(()=>(t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),t.STATIC_DRAW),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(0),(e,r=!1)=>{e==null?(t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),t.bindFramebuffer(t.FRAMEBUFFER,null)):(t.viewport(0,0,e.width,e.height),t.bindFramebuffer(t.FRAMEBUFFER,e.fbo)),r&&(t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)}))();let F,d,y,W,L;const me=new X(C,_e),le=new X(C,ve),M=new X(C,ze),I=new X(C,De),k=new X(C,de),J=new X(C,Ye),z=new X(C,Ge),Q=new X(C,he),pe=new X(C,H),Ee=new Xe(C,Me);function Z(){let e=Re(T.SIM_RESOLUTION),r=Re(T.DYE_RESOLUTION);const i=N.halfFloatTexType,a=N.formatRGBA,n=N.formatRG,v=N.formatR,h=N.supportLinearFiltering?t.LINEAR:t.NEAREST;t.disable(t.BLEND),F==null?F=ce(r.width,r.height,a.internalFormat,a.format,i,h):F=Le(F,r.width,r.height,a.internalFormat,a.format,i,h),d==null?d=ce(e.width,e.height,n.internalFormat,n.format,i,h):d=Le(d,e.width,e.height,n.internalFormat,n.format,i,h),y=O(e.width,e.height,v.internalFormat,v.format,i,t.NEAREST),W=O(e.width,e.height,v.internalFormat,v.format,i,t.NEAREST),L=ce(e.width,e.height,v.internalFormat,v.format,i,t.NEAREST)}function O(e,r,i,a,n,v){t.activeTexture(t.TEXTURE0);let h=t.createTexture();t.bindTexture(t.TEXTURE_2D,h),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,v),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,v),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,i,e,r,0,a,n,null);let x=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,x),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,h,0),t.viewport(0,0,e,r),t.clear(t.COLOR_BUFFER_BIT);let g=1/e,R=1/r;return{texture:h,fbo:x,width:e,height:r,texelSizeX:g,texelSizeY:R,attach(j){return t.activeTexture(t.TEXTURE0+j),t.bindTexture(t.TEXTURE_2D,h),j}}}function ce(e,r,i,a,n,v){let h=O(e,r,i,a,n,v),x=O(e,r,i,a,n,v);return{width:e,height:r,texelSizeX:h.texelSizeX,texelSizeY:h.texelSizeY,get read(){return h},set read(g){h=g},get write(){return x},set write(g){x=g},swap(){let g=h;h=x,x=g}}}function ye(e,r,i,a,n,v,h){let x=O(r,i,a,n,v,h);return me.bind(),t.uniform1i(me.uniforms.uTexture,e.attach(0)),P(x),x}function Le(e,r,i,a,n,v,h){return e.width==r&&e.height==i||(e.read=ye(e.read,r,i,a,n,v,h),e.write=O(r,i,a,n,v,h),e.width=r,e.height=i,e.texelSizeX=1/r,e.texelSizeY=1/i),e}function Ve(){let e=[];T.SHADING&&e.push("SHADING"),Ee.setKeywords(e)}Ve(),Z(),b(parseInt(Math.random()*20)+5);let ee=Date.now(),K=0;te();function te(){const e=Ae();Ie()&&Z(),He(e),ue(),xe(e),we(null),requestAnimationFrame(te)}function Ae(){let e=Date.now(),r=(e-ee)/1e3;return r=Math.min(r,.016666),ee=e,r}function Ie(){let e=A(m.clientWidth),r=A(m.clientHeight);return m.width!=e||m.height!=r?(m.width=e,m.height=r,!0):!1}function He(e){K+=e*T.COLOR_UPDATE_SPEED,K>=1&&(K=Te(K,0,1),p.forEach(r=>{r.color=q()}))}function ue(){p.forEach(e=>{e.moved&&(e.moved=!1,We(e))})}function xe(e){t.disable(t.BLEND),J.bind(),t.uniform2f(J.uniforms.texelSize,d.texelSizeX,d.texelSizeY),t.uniform1i(J.uniforms.uVelocity,d.read.attach(0)),P(W),z.bind(),t.uniform2f(z.uniforms.texelSize,d.texelSizeX,d.texelSizeY),t.uniform1i(z.uniforms.uVelocity,d.read.attach(0)),t.uniform1i(z.uniforms.uCurl,W.attach(1)),t.uniform1f(z.uniforms.curl,T.CURL),t.uniform1f(z.uniforms.dt,e),P(d.write),d.swap(),k.bind(),t.uniform2f(k.uniforms.texelSize,d.texelSizeX,d.texelSizeY),t.uniform1i(k.uniforms.uVelocity,d.read.attach(0)),P(y),le.bind(),t.uniform1i(le.uniforms.uTexture,L.read.attach(0)),t.uniform1f(le.uniforms.value,T.PRESSURE),P(L.write),L.swap(),Q.bind(),t.uniform2f(Q.uniforms.texelSize,d.texelSizeX,d.texelSizeY),t.uniform1i(Q.uniforms.uDivergence,y.attach(0));for(let i=0;i<T.PRESSURE_ITERATIONS;i++)t.uniform1i(Q.uniforms.uPressure,L.read.attach(1)),P(L.write),L.swap();pe.bind(),t.uniform2f(pe.uniforms.texelSize,d.texelSizeX,d.texelSizeY),t.uniform1i(pe.uniforms.uPressure,L.read.attach(0)),t.uniform1i(pe.uniforms.uVelocity,d.read.attach(1)),P(d.write),d.swap(),I.bind(),t.uniform2f(I.uniforms.texelSize,d.texelSizeX,d.texelSizeY),N.supportLinearFiltering||t.uniform2f(I.uniforms.dyeTexelSize,d.texelSizeX,d.texelSizeY);let r=d.read.attach(0);t.uniform1i(I.uniforms.uVelocity,r),t.uniform1i(I.uniforms.uSource,r),t.uniform1f(I.uniforms.dt,e),t.uniform1f(I.uniforms.dissipation,T.VELOCITY_DISSIPATION),P(d.write),d.swap(),N.supportLinearFiltering||t.uniform2f(I.uniforms.dyeTexelSize,F.texelSizeX,F.texelSizeY),t.uniform1i(I.uniforms.uVelocity,d.read.attach(0)),t.uniform1i(I.uniforms.uSource,F.read.attach(1)),t.uniform1f(I.uniforms.dissipation,T.DENSITY_DISSIPATION),P(F.write),F.swap()}function we(e){t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.BLEND),Fe(e)}function Fe(e){let r=e==null?t.drawingBufferWidth:e.width,i=e==null?t.drawingBufferHeight:e.height;Ee.bind(),T.SHADING&&t.uniform2f(Ee.uniforms.texelSize,1/r,1/i),t.uniform1i(Ee.uniforms.uTexture,F.read.attach(0)),P(e)}function We(e){let r=e.deltaX*T.SPLAT_FORCE,i=e.deltaY*T.SPLAT_FORCE;re(e.texcoordX,e.texcoordY,r,i,e.color)}function ke(e){const r=q();r.r*=10,r.g*=10,r.b*=10;let i=10*(Math.random()-.5),a=30*(Math.random()-.5);re(e.texcoordX,e.texcoordY,i,a,r)}function b(e){for(let r=0;r<e;r++){const i=q();i.r*=10,i.g*=10,i.b*=10;const a=Math.random(),n=Math.random(),v=1e3*(Math.random()-.5),h=1e3*(Math.random()-.5);re(a,n,v,h,i)}}function re(e,r,i,a,n){M.bind(),t.uniform1i(M.uniforms.uTarget,d.read.attach(0)),t.uniform1f(M.uniforms.aspectRatio,m.width/m.height),t.uniform2f(M.uniforms.point,e,r),t.uniform3f(M.uniforms.color,i,a,0),t.uniform1f(M.uniforms.radius,be(T.SPLAT_RADIUS/100)),P(d.write),d.swap(),t.uniform1i(M.uniforms.uTarget,F.read.attach(0)),t.uniform3f(M.uniforms.color,n.r,n.g,n.b),P(F.write),F.swap()}function be(e){let r=m.width/m.height;return r>1&&(e*=r),e}window.addEventListener("mousedown",e=>{let r=p[0],i=A(e.clientX),a=A(e.clientY);Ue(r,-1,i,a),ke(r)}),m.addEventListener("mousemove",e=>{let r=p[0],i=A(e.clientX),a=A(e.clientY),n=q();te(),ie(r,i,a,n)},{once:!0}),window.addEventListener("mousemove",e=>{let r=p[0],i=A(e.clientX),a=A(e.clientY),n=r.color;ie(r,i,a,n)}),m.addEventListener("touchstart",e=>{const r=e.targetTouches;r[0];let i=p[0];for(let a=0;a<r.length;a++){let n=A(r[a].clientX),v=A(r[a].clientY);te(),Ue(i,r[a].identifier,n,v)}},{once:!0}),window.addEventListener("touchstart",e=>{const r=e.targetTouches;let i=p[0];for(let a=0;a<r.length;a++){let n=A(r[a].clientX),v=A(r[a].clientY);Ue(i,r[a].identifier,n,v)}}),window.addEventListener("touchmove",e=>{const r=e.targetTouches;let i=p[0];for(let a=0;a<r.length;a++){let n=A(r[a].clientX),v=A(r[a].clientY);ie(i,n,v,i.color)}},!1),window.addEventListener("touchend",e=>{const r=e.changedTouches;let i=p[0];for(let a=0;a<r.length;a++)Pe(i)});function Ue(e,r,i,a){e.id=r,e.down=!0,e.moved=!1,e.texcoordX=i/m.width,e.texcoordY=1-a/m.height,e.prevTexcoordX=e.texcoordX,e.prevTexcoordY=e.texcoordY,e.deltaX=0,e.deltaY=0,e.color=q()}function ie(e,r,i,a){e.prevTexcoordX=e.texcoordX,e.prevTexcoordY=e.texcoordY,e.texcoordX=r/m.width,e.texcoordY=1-i/m.height,e.deltaX=Ke(e.texcoordX-e.prevTexcoordX),e.deltaY=ge(e.texcoordY-e.prevTexcoordY),e.moved=Math.abs(e.deltaX)>0||Math.abs(e.deltaY)>0,e.color=a}function Pe(e){e.down=!1}function Ke(e){let r=m.width/m.height;return r<1&&(e*=r),e}function ge(e){let r=m.width/m.height;return r>1&&(e/=r),e}function q(){let e=qe(Math.random(),1,1);return e.r*=.15,e.g*=.15,e.b*=.15,e}function qe(e,r,i){let a,n,v,h,x,g,R,j;switch(h=Math.floor(e*6),x=e*6-h,g=i*(1-r),R=i*(1-x*r),j=i*(1-(1-x)*r),h%6){case 0:a=i,n=j,v=g;break;case 1:a=R,n=i,v=g;break;case 2:a=g,n=i,v=j;break;case 3:a=g,n=R,v=i;break;case 4:a=j,n=g,v=i;break;case 5:a=i,n=g,v=R;break}return{r:a,g:n,b:v}}function Te(e,r,i){let a=i-r;return a==0?r:(e-r)%a+r}function Re(e){let r=t.drawingBufferWidth/t.drawingBufferHeight;r<1&&(r=1/r);let i=Math.round(e),a=Math.round(e*r);return t.drawingBufferWidth>t.drawingBufferHeight?{width:a,height:i}:{width:i,height:a}}function A(e){let r=window.devicePixelRatio||1;return Math.floor(e*r)}function Se(e){if(e.length==0)return 0;let r=0;for(let i=0;i<e.length;i++)r=(r<<5)-r+e.charCodeAt(i),r|=0;return r}})()}),[E]}class Jt extends Xt{constructor(U){super(),Ot(this,U,qt,kt,Mt,{})}}export{Jt as component};
